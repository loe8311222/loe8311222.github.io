<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>LIFF Get User ID</title>
  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body>
  <h1>LINE 使用者資訊</h1>
  <div id="info">載入中...</div>

  <script>
    async function main() {
      await liff.init({ liffId: "2007813323-1YvEowKM" });

      if (!liff.isLoggedIn()) {
        liff.login(); // 重新登入
        return;
      }

      const profile = await liff.getProfile();
      const userId = profile.userId;
      const displayName = profile.displayName;

      document.getElementById('info').innerHTML =
        `<p>你好，${name}</p>
        <p>User ID: <code>${userId}</code></p>`;
      
      // ✅ 可選：把 userId 傳回你伺服器
      // await fetch('/save-user', {
      //   method: 'POST',
      //   body: JSON.stringify({ userId }),
      //   headers: { 'Content-Type': 'application/json' }
      // });
    }

    main();
  </script>
</body>
</html>
